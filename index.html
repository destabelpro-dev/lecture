<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Suivi de lecture</title>
    <style>
        body {margin:0;font-family:Arial,sans-serif;background-color:#000;color:#fff;}
        h1,h2,h3{margin:0;}
        .container{padding:20px;}
        h1{text-align:left;margin-bottom:30px;}
        .section{margin-bottom:20px;}
        .section-header{display:flex;justify-content:space-between;align-items:center;cursor:pointer;}
        .section-header h2{font-size:1.2em;}
        .section-content{margin-top:10px;border:1px solid rgba(255,255,255,0.3);padding:10px;display:none;}
        .button-container{display:flex;gap:10px;flex-wrap:wrap;}
        .btn{padding:10px 15px;border:1px solid #fff;background-color:transparent;color:#fff;border-radius:8px;cursor:pointer;transition:0.3s;}
        .btn:hover{background-color:#fff;color:#000;}
        #bibliothequePage{display:none;}
        .top-bar{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;position:sticky;top:0;background-color:#000;padding:10px 0;}
        .top-bar input[type="text"]{flex:1;margin-left:10px;padding:5px 10px;border-radius:5px;border:1px solid #fff;background-color:#000;color:#fff;}
        .add-btn{width:40px;height:40px;border-radius:50%;border:1px solid #fff;background-color:#fff;color:#000;font-size:24px;text-align:center;line-height:36px;cursor:pointer;}
        .back-btn{cursor:pointer;font-size:24px;}
        .library-info{display:flex;justify-content:space-between;margin-top:10px;position:relative;}
        .sort-btn{cursor:pointer;border:1px solid #fff;border-radius:5px;padding:5px 8px;background-color:transparent;color:#fff;}
        #sortMenu div:hover{background-color:#333;}
        .book-list{margin-top:10px;}
        .book-item{border-bottom:1px solid rgba(255,255,255,0.3);padding:5px 0;}
        .book-item span{display:block;}
        #addBookPage{display:none;}
        .input-field{display:flex;flex-direction:column;margin-bottom:15px;}
        .input-field input{padding:8px;border-radius:5px;border:1px solid #fff;background-color:#000;color:#fff;}
        .input-field label{margin-bottom:5px;}
        .submit-btn{padding:10px;border-radius:20px;border:1px solid #fff;background-color:#fff;color:#000;cursor:pointer;width:100%;}
    </style>
</head>
<body>
    <!-- Page d'accueil -->
    <div id="homePage" class="container">
        <h1>Suivi de lecture</h1>
        <div class="section">
            <div class="section-header" onclick="toggleSection('lectureEnCours')">
                <h2>Lecture en cours</h2>
                <span>^</span>
            </div>
            <div id="lectureEnCours" class="section-content"></div>
        </div>
        <div class="section">
            <div class="section-header" onclick="toggleSection('bibliotheque')">
                <h2>Bibliothèque</h2>
                <span>^</span>
            </div>
            <div id="bibliotheque" class="section-content">
                <div class="button-container">
                    <button class="btn" onclick="openBibliotheque()">Bibliothèque</button>
                    <button class="btn">Liste de souhaits</button>
                    <button class="btn">À lire</button>
                    <button class="btn">Terminé</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Page Bibliothèque -->
    <div id="bibliothequePage" class="container">
        <div class="top-bar">
            <div style="display:flex;align-items:center;gap:10px;">
                <span class="back-btn" onclick="backToHome()">✕</span>
                <input type="text" id="searchBook" placeholder="Rechercher..." onkeyup="filterBooks()">
                <button class="add-btn" onclick="openAddBook()">+</button>
            </div>
        </div>
        <h2 style="margin-top:10px;">Bibliothèque</h2>
        <div class="library-info">
            <span id="totalBooks">0 livres</span>
            <div style="position:relative;">
                <button class="sort-btn" onclick="toggleSortMenu()">Trier</button>
                <div id="sortMenu" style="display:none;position:absolute;background-color:#111;border:1px solid #fff;border-radius:5px;top:35px;right:0;z-index:10;">
                    <div style="padding:5px;cursor:pointer;" onclick="sortBooks('title', true)">Titre ↑</div>
                    <div style="padding:5px;cursor:pointer;" onclick="sortBooks('title', false)">Titre ↓</div>
                    <div style="padding:5px;cursor:pointer;" onclick="sortBooks('author', true)">Auteur ↑</div>
                    <div style="padding:5px;cursor:pointer;" onclick="sortBooks('author', false)">Auteur ↓</div>
                    <div style="padding:5px;cursor:pointer;" onclick="sortBooks('pages', true)">Pages ↑</div>
                    <div style="padding:5px;cursor:pointer;" onclick="sortBooks('pages', false)">Pages ↓</div>
                </div>
            </div>
        </div>
        <div id="bookList" class="book-list"></div>
    </div>

    <!-- Page Ajouter un livre -->
    <div id="addBookPage" class="container">
        <div class="top-bar">
            <span class="back-btn" onclick="backToLibrary()">✕</span>
            <h2 style="text-align:center; flex:1;">Ajouter un livre</h2>
            <div style="width:40px;"></div>
        </div>
        <div class="section">
            <h3>Détails du livre</h3>
            <div class="section-content" style="display:block;">
                <div class="input-field">
                    <label>Titre</label>
                    <input type="text" id="bookTitle" placeholder="Nouveau livre">
                </div>
                <div class="input-field">
                    <label>Auteur</label>
                    <input type="text" id="bookAuthor" placeholder="Nouvel Auteur">
                </div>
                <div class="input-field">
                    <label>Année de publication</label>
                    <input type="text" id="bookYear" placeholder="2025">
                </div>
            </div>
        </div>
        <div class="section">
            <h3>Format du livre</h3>
            <div class="section-content" style="display:block;">
                <div class="input-field">
                    <label>Nombre de pages</label>
                    <input type="number" id="bookPages" placeholder="Nombre de pages">
                </div>
            </div>
        </div>
        <button class="submit-btn" onclick="addBook()">Ajouter à la bibliothèque</button>
    </div>

    <script>
        // Gestion des sections
        function toggleSection(id) {
            const content = document.getElementById(id);
            content.style.display = content.style.display === 'block' ? 'none' : 'block';
        }

        // Navigation
        function openBibliotheque() {
            document.getElementById('homePage').style.display = 'none';
            document.getElementById('bibliothequePage').style.display = 'block';
        }

        function backToHome() {
            document.getElementById('bibliothequePage').style.display = 'none';
            document.getElementById('homePage').style.display = 'block';
        }

        function openAddBook() {
            document.getElementById('bibliothequePage').style.display = 'none';
            document.getElementById('addBookPage').style.display = 'block';
        }

        function backToLibrary() {
            document.getElementById('addBookPage').style.display = 'none';
            document.getElementById('bibliothequePage').style.display = 'block';
        }

        // Bibliothèque
        let books = [];

        // Charger les livres depuis le localStorage
        window.onload = function() {
            const storedBooks = localStorage.getItem('books');
            if(storedBooks) {
                books = JSON.parse(storedBooks);
                renderBooks();
            }
        }

        function addBook() {
            const title = document.getElementById('bookTitle').value;
            const author = document.getElementById('bookAuthor').value;
            const year = document.getElementById('bookYear').value;
            const pages = document.getElementById('bookPages').value;

            if(title && author && year && pages) {
                books.push({title, author, year, pages: Number(pages)});
                // Sauvegarder dans localStorage
                localStorage.setItem('books', JSON.stringify(books));
                document.getElementById('bookTitle').value = '';
                document.getElementById('bookAuthor').value = '';
                document.getElementById('bookYear').value = '';
                document.getElementById('bookPages').value = '';
                backToLibrary();
                renderBooks();
            } else {
                alert('Veuillez remplir tous les champs.');
            }
        }

        function renderBooks() {
            const list = document.getElementById('bookList');
            list.innerHTML = '';
            books.forEach(book => {
                const div = document.createElement('div');
                div.className = 'book-item';
                div.innerHTML = `<span><strong>${book.title}</strong></span>
                                 <span>${book.author} (${book.year})</span>
                                 <span>${book.pages} pages</span>`;
                list.appendChild(div);
            });
            document.getElementById('totalBooks').innerText = books.length + ' livres';
        }

        function filterBooks() {
            const query = document.getElementById('searchBook').value.toLowerCase();
            const filtered = books.filter(book =>
                book.title.toLowerCase().includes(query) || 
                book.author.toLowerCase().includes(query)
            );
            const list = document.getElementById('bookList');
            list.innerHTML = '';
            filtered.forEach(book => {
                const div = document.createElement('div');
                div.className = 'book-item';
                div.innerHTML = `<span><strong>${book.title}</strong></span>
                                 <span>${book.author} (${book.year})</span>
                                 <span>${book.pages} pages</span>`;
                list.appendChild(div);
            });
        }

        function toggleSortMenu() {
            const menu = document.getElementById('sortMenu');
            menu.style.display = menu.style.display === 'block' ? 'none' : 'block';
        }

        function sortBooks(criteria, asc) {
            books.sort((a,b) => {
                if(a[criteria] < b[criteria]) return asc ? -1 : 1;
                if(a[criteria] > b[criteria]) return asc ? 1 : -1;
                return 0;
            });
            localStorage.setItem('books', JSON.stringify(books)); // sauvegarde triée
            renderBooks();
            toggleSortMenu();
        }
    </script>
</body>
</html>
